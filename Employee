import java.text.DecimalFormat;
import java.util.Scanner;

class Employee {
    private int employee_id;
    private String employee_name;
    private double employee_salary;
    private String department;
    private int yearsOfService;
    
    // Constructor
    public Employee(int id, String name, double salary, String department) {
        this.employee_id = id;
        this.employee_name = name;
        this.employee_salary = salary;
        this.department = department;
        this.yearsOfService = 0;
    }
    
    // Getter and setter for employee_id
    public int getEmployeeId() {
        return employee_id;
    }
    
    public void setEmployeeId(int id) {
        if (id > 0) {
            this.employee_id = id;
        }
    }
    
    // Getter and setter for employee_name
    public String getEmployeeName() {
        return employee_name;
    }
    
    public void setEmployeeName(String name) {
        if (name != null && !name.trim().isEmpty()) {
            this.employee_name = name;
        }
    }
    
    // Getter for salary (formatted string only)
    public String getEmployeeSalary() {
        DecimalFormat df = new DecimalFormat("#,##0.00");
        return "₱" + df.format(employee_salary);
    }
    
    // Package-private setter for salary (used only by internal methods)
    void setSalary(double salary) {
        if (salary > 0) {
            this.employee_salary = salary;
        }
    }
    
    // Additional feature 1: Salary adjustment with performance bonus
    public void applyPerformanceBonus(double percentage) {
        if (percentage > 0 && percentage <= 50) {
            double bonus = employee_salary * (percentage / 100);
            employee_salary += bonus;
            System.out.println("✓ Applied " + percentage + "% bonus. New salary: " + getEmployeeSalary());
        } else {
            System.out.println("✗ Invalid bonus percentage (must be 0-50%)");
        }
    }
    
    // Additional feature 2: Calculate annual salary with tax deduction
    public String calculateAnnualSalary() {
        double annual = employee_salary * 12;
        double tax = annual * 0.10; // 10% tax
        double netAnnual = annual - tax;
        DecimalFormat df = new DecimalFormat("#,##0.00");
        return "Gross Annual: ₱" + df.format(annual) + 
               " | Tax: ₱" + df.format(tax) + 
               " | Net Annual: ₱" + df.format(netAnnual);
    }
    
    // Additional methods
    public String getDepartment() {
        return department;
    }
    
    public void setDepartment(String department) {
        this.department = department;
    }
    
    public void incrementYearsOfService() {
        yearsOfService++;
    }
    
    public int getYearsOfService() {
        return yearsOfService;
    }
    
    // Display employee information
    public void displayEmployeeInfo() {
        
        System.out.println("          EMPLOYEE INFORMATION");
        
        System.out.println("ID:              " + employee_id);
        System.out.println("Name:            " + employee_name);
        System.out.println("Salary:          " + getEmployeeSalary());
        System.out.println("Department:      " + department);
        System.out.println("Years of Service:" + yearsOfService);
        
    }
}

// Main class with manual input
public class EmployeeManagementSystem {
    private static Scanner scanner = new Scanner(System.in);
    
    public static void main(String[] args) {
        
        
        
        
        // Ask user how many employees to create
        System.out.print("How many employees would you like to register? ");
        int numEmployees = getPositiveInt();
        
        Employee[] employees = new Employee[numEmployees];
        
        // Manual input for each employee
        for (int i = 0; i < numEmployees; i++) {
            
            System.out.println("  REGISTERING EMPLOYEE #" + (i + 1));
            
            
            employees[i] = createEmployeeManually();
        }
        
        boolean running = true;
        while (running) {
            
            
            System.out.println("           MAIN MENU");
            
            System.out.println("1. View All Employees");
            System.out.println("2. Update Employee Information");
            System.out.println("3. Apply Performance Bonus");
            System.out.println("4. Calculate Annual Salaries");
            System.out.println("5. Increment Years of Service");
            System.out.println("6. Exit");
            System.out.print("\nEnter your choice (1-6): ");
            
            int choice = getIntInRange(1, 6);
            
            switch (choice) {
                case 1:
                    viewAllEmployees(employees);
                    break;
                case 2:
                    updateEmployee(employees);
                    break;
                case 3:
                    applyBonus(employees);
                    break;
                case 4:
                    calculateAnnualSalaries(employees);
                    break;
                case 5:
                    incrementServiceYears(employees);
                    break;
                case 6:
                    running = false;
                    System.out.println("\nThank you for using Employee Management System!");
                    break;
            }
        }
        
        scanner.close();
    }
    
    // Method to create employee manually
    private static Employee createEmployeeManually() {
        System.out.print("Enter Employee ID: ");
        int id = getPositiveInt();
        
        System.out.print("Enter Employee Name: ");
        String name = scanner.nextLine();
        
        System.out.print("Enter Monthly Salary: ");
        double salary = getPositiveDouble();
        
        System.out.print("Enter Department: ");
        String department = scanner.nextLine();
        
        System.out.println("✓ Employee registered successfully!");
        return new Employee(id, name, salary, department);
    }
    
    // Method to view all employees
    private static void viewAllEmployees(Employee[] employees) {
        if (employees.length == 0) {
            System.out.println("\nNo employees registered yet.");
            return;
        }
        
        
        System.out.println("         ALL EMPLOYEES LIST");
        
        
        for (int i = 0; i < employees.length; i++) {
            System.out.println("\nEmployee #" + (i + 1) + ":");
            employees[i].displayEmployeeInfo();
        }
    }
    
    // Method to update employee information
    private static void updateEmployee(Employee[] employees) {
        if (employees.length == 0) {
            System.out.println("\nNo employees to update.");
            return;
        }
        
        System.out.print("\nEnter employee number to update (1-" + employees.length + "): ");
        int empIndex = getIntInRange(1, employees.length) - 1;
        
        System.out.println("\nWhat would you like to update?");
        System.out.println("1. Employee Name");
        System.out.println("2. Department");
        System.out.println("3. Both");
        System.out.print("Enter choice (1-3): ");
        
        int choice = getIntInRange(1, 3);
        
        if (choice == 1 || choice == 3) {
            System.out.print("Enter new name: ");
            String newName = scanner.nextLine();
            employees[empIndex].setEmployeeName(newName);
            System.out.println("✓ Name updated successfully!");
        }
        
        if (choice == 2 || choice == 3) {
            System.out.print("Enter new department: ");
            String newDept = scanner.nextLine();
            employees[empIndex].setDepartment(newDept);
            System.out.println("✓ Department updated successfully!");
        }
    }
    
    // Method to apply performance bonus
    private static void applyBonus(Employee[] employees) {
        if (employees.length == 0) {
            System.out.println("\nNo employees to apply bonus to.");
            return;
        }
        
        System.out.print("\nEnter employee number to apply bonus (1-" + employees.length + "): ");
        int empIndex = getIntInRange(1, employees.length) - 1;
        
        System.out.print("Enter bonus percentage (0-50): ");
        double percentage = getDoubleInRange(0, 50);
        
        System.out.println("\nApplying bonus to " + employees[empIndex].getEmployeeName() + "...");
        employees[empIndex].applyPerformanceBonus(percentage);
    }
    
    // Method to calculate annual salaries
    private static void calculateAnnualSalaries(Employee[] employees) {
        if (employees.length == 0) {
            System.out.println("\nNo employees to calculate.");
            return;
        }
        
        System.out.println("               ANNUAL SALARY CALCULATIONS");
        
        for (Employee emp : employees) {
            System.out.println("\n" + emp.getEmployeeName() + ":");
            System.out.println(emp.calculateAnnualSalary());
        }
    }
    
    // Method to increment service years
    private static void incrementServiceYears(Employee[] employees) {
        if (employees.length == 0) {
            System.out.println("\nNo employees to update.");
            return;
        }
        
        
        System.out.println("   INCREMENT YEARS OF SERVICE");
        
        
        for (Employee emp : employees) {
            System.out.print("Increment years for " + emp.getEmployeeName() + "? (y/n): ");
            String response = scanner.nextLine().toLowerCase();
            
            if (response.equals("y")) {
                emp.incrementYearsOfService();
                System.out.println("✓ " + emp.getEmployeeName() + " now has " + 
                                  emp.getYearsOfService() + " years of service.");
            }
        }
    }
    
    // Utility methods for input validation
    private static int getPositiveInt() {
        while (true) {
            try {
                int value = Integer.parseInt(scanner.nextLine());
                if (value > 0) return value;
                System.out.print("Please enter a positive number: ");
            } catch (NumberFormatException e) {
                System.out.print("Invalid input. Please enter a number: ");
            }
        }
    }
    
    private static double getPositiveDouble() {
        while (true) {
            try {
                double value = Double.parseDouble(scanner.nextLine());
                if (value > 0) return value;
                System.out.print("Please enter a positive number: ");
            } catch (NumberFormatException e) {
                System.out.print("Invalid input. Please enter a number: ");
            }
        }
    }
    
    private static int getIntInRange(int min, int max) {
        while (true) {
            try {
                int value = Integer.parseInt(scanner.nextLine());
                if (value >= min && value <= max) return value;
                System.out.print("Please enter a number between " + min + " and " + max + ": ");
            } catch (NumberFormatException e) {
                System.out.print("Invalid input. Please enter a number: ");
            }
        }
    }
    
    private static double getDoubleInRange(double min, double max) {
        while (true) {
            try {
                double value = Double.parseDouble(scanner.nextLine());
                if (value >= min && value <= max) return value;
                System.out.print("Please enter a number between " + min + " and " + max + ": ");
            } catch (NumberFormatException e) {
                System.out.print("Invalid input. Please enter a number: ");
            }
        }
    }
}